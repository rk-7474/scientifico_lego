{"version":3,"file":"perms-BYMvbViO.js","sources":["../../../.svelte-kit/adapter-node/chunks/perms.js"],"sourcesContent":["import { p as pool } from \"./db.js\";\nconst hasPerms = async (room_id, user_id) => {\n  const [[room]] = await pool.execute(\"select user_id, id from rooms where uuid = ?\", [room_id]);\n  if (room && room.user_id !== Number(user_id)) {\n    const [editors] = await pool.execute(\"select * from editors where room_id = ? AND user_id = ?\", [room_id, user_id]);\n    if (editors.length === 0 || !editors.some((e) => e.user_id === user_id))\n      return false;\n  }\n  return true;\n};\nexport {\n  hasPerms as h\n};\n"],"names":[],"mappings":";;AACK,MAAC,QAAQ,GAAG,OAAO,OAAO,EAAE,OAAO,KAAK;AAC7C,EAAE,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,8CAA8C,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;AACjG,EAAE,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,KAAK,MAAM,CAAC,OAAO,CAAC,EAAE;AAChD,IAAI,MAAM,CAAC,OAAO,CAAC,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,yDAAyD,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC;AACxH,IAAI,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,KAAK,OAAO,CAAC;AAC3E,MAAM,OAAO,KAAK,CAAC;AACnB,GAAG;AACH,EAAE,OAAO,IAAI,CAAC;AACd;;;;"}