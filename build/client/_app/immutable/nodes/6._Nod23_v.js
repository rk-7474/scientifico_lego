import{s as ge,a as ye,n as Ce,r as qe}from"../chunks/2.0OfY4fVd.js";import{S as Le,i as He,s as x,e as h,l as Ue,d as c,f as T,c as m,m as q,a as ue,o as v,g as y,h as b,y as ke,t as Ee,b as Se,u as Oe,j as Pe}from"../chunks/index.rEPfTm2O.js";import{e as Y}from"../chunks/each.6w4Ej4nR.js";import{e as xe}from"../chunks/forms._kcyD7rx.js";function Te(n,i,r){const a=n.slice();return a[9]=i[r].username,a[10]=i[r].id,a}function Re(n,i,r){const a=n.slice();return a[9]=i[r].username,a[13]=i[r].user_id,a}function Be(n){let i,r=n[9]+"",a,f,_,R;function E(){return n[7](n[13])}return{c(){i=h("button"),a=Ee(r),f=h("br")},l(l){i=m(l,"BUTTON",{});var p=ue(i);a=Se(p,r),p.forEach(c),f=m(l,"BR",{})},m(l,p){y(l,i,p),b(i,a),y(l,f,p),_||(R=Oe(i,"click",E),_=!0)},p(l,p){n=l,p&2&&r!==(r=n[9]+"")&&Pe(a,r)},d(l){l&&(c(i),c(f)),_=!1,R()}}}function Ne(n){let i,r=n[9]+"",a,f,_,R;function E(){return n[8](n[10],n[9])}return{c(){i=h("button"),a=Ee(r),f=h("br")},l(l){i=m(l,"BUTTON",{});var p=ue(i);a=Se(p,r),p.forEach(c),f=m(l,"BR",{})},m(l,p){y(l,i,p),b(i,a),y(l,f,p),_||(R=Oe(i,"click",E),_=!0)},p(l,p){n=l,p&4&&r!==(r=n[9]+"")&&Pe(a,r)},d(l){l&&(c(i),c(f)),_=!1,R()}}}function Ae(n){let i,r,a="Editors",f,_,R,E,l,p='<input type="text" name="q" class="border-gray-500 border"/> <button>Search</button>',z,g,d,B,L,ce="Settings",K,H,fe="Room visibility",Q,s,U,Z,S,V,$,A,de="Public",ee,te,O,W,le,I,he="Private",re,ie,P,X,ne,M,me="Reserved",oe,ae,j,_e="Save",se,pe,w=Y(n[1]),C=[];for(let e=0;e<w.length;e+=1)C[e]=Be(Re(n,w,e));let F=Y(n[2]),k=[];for(let e=0;e<F.length;e+=1)k[e]=Ne(Te(n,F,e));return{c(){i=x(),r=h("h3"),r.textContent=a,f=x();for(let e=0;e<C.length;e+=1)C[e].c();_=x(),R=h("hr"),E=x(),l=h("form"),l.innerHTML=p,z=x();for(let e=0;e<k.length;e+=1)k[e].c();g=x(),d=h("hr"),B=x(),L=h("h3"),L.textContent=ce,K=x(),H=h("h2"),H.textContent=fe,Q=x(),s=h("form"),U=h("input"),Z=x(),S=h("input"),$=x(),A=h("label"),A.textContent=de,ee=h("br"),te=x(),O=h("input"),le=x(),I=h("label"),I.textContent=he,re=h("br"),ie=x(),P=h("input"),ne=x(),M=h("label"),M.textContent=me,oe=h("br"),ae=x(),j=h("button"),j.textContent=_e,this.h()},l(e){Ue("svelte-1t2a41c",document.head).forEach(c),i=T(e),r=m(e,"H3",{"data-svelte-h":!0}),q(r)!=="svelte-11vfj18"&&(r.textContent=a),f=T(e);for(let N=0;N<C.length;N+=1)C[N].l(e);_=T(e),R=m(e,"HR",{}),E=T(e),l=m(e,"FORM",{action:!0,method:!0,"data-svelte-h":!0}),q(l)!=="svelte-jgoezf"&&(l.innerHTML=p),z=T(e);for(let N=0;N<k.length;N+=1)k[N].l(e);g=T(e),d=m(e,"HR",{}),B=T(e),L=m(e,"H3",{"data-svelte-h":!0}),q(L)!=="svelte-1qq2p5h"&&(L.textContent=ce),K=T(e),H=m(e,"H2",{"data-svelte-h":!0}),q(H)!=="svelte-1y2gvx5"&&(H.textContent=fe),Q=T(e),s=m(e,"FORM",{action:!0,method:!0});var t=ue(s);U=m(t,"INPUT",{type:!0,name:!0,class:!0}),Z=T(t),S=m(t,"INPUT",{type:!0,name:!0,id:!0}),$=T(t),A=m(t,"LABEL",{for:!0,"data-svelte-h":!0}),q(A)!=="svelte-c0zete"&&(A.textContent=de),ee=m(t,"BR",{}),te=T(t),O=m(t,"INPUT",{type:!0,name:!0,id:!0}),le=T(t),I=m(t,"LABEL",{for:!0,"data-svelte-h":!0}),q(I)!=="svelte-tqk540"&&(I.textContent=he),re=m(t,"BR",{}),ie=T(t),P=m(t,"INPUT",{type:!0,name:!0,id:!0}),ne=T(t),M=m(t,"LABEL",{for:!0,"data-svelte-h":!0}),q(M)!=="svelte-xzgui"&&(M.textContent=me),oe=m(t,"BR",{}),ae=T(t),j=m(t,"BUTTON",{type:!0,"data-svelte-h":!0}),q(j)!=="svelte-1f2bxem"&&(j.textContent=_e),t.forEach(c),this.h()},h(){var e,o,t,N,J,D;document.title="Space 4 Art - Room",v(l,"action","?/search"),v(l,"method","post"),v(U,"type","hidden"),v(U,"name","room_id"),U.value=n[3],v(U,"class","hidden"),v(S,"type","radio"),v(S,"name","visibility"),v(S,"id","public"),S.value="public",S.checked=V=((o=(e=n[0])==null?void 0:e.room)==null?void 0:o.state)=="public",S.required=!0,v(A,"for","public"),v(O,"type","radio"),v(O,"name","visibility"),v(O,"id","private"),O.value="private",O.checked=W=((N=(t=n[0])==null?void 0:t.room)==null?void 0:N.state)=="private",O.required=!0,v(I,"for","private"),v(P,"type","radio"),v(P,"name","visibility"),v(P,"id","reserved"),P.value="reserved",P.checked=X=((D=(J=n[0])==null?void 0:J.room)==null?void 0:D.state)=="reserved",P.required=!0,v(M,"for","reserved"),v(j,"type","submit"),v(s,"action","?/save"),v(s,"method","post")},m(e,o){y(e,i,o),y(e,r,o),y(e,f,o);for(let t=0;t<C.length;t+=1)C[t]&&C[t].m(e,o);y(e,_,o),y(e,R,o),y(e,E,o),y(e,l,o),y(e,z,o);for(let t=0;t<k.length;t+=1)k[t]&&k[t].m(e,o);y(e,g,o),y(e,d,o),y(e,B,o),y(e,L,o),y(e,K,o),y(e,H,o),y(e,Q,o),y(e,s,o),b(s,U),b(s,Z),b(s,S),b(s,$),b(s,A),b(s,ee),b(s,te),b(s,O),b(s,le),b(s,I),b(s,re),b(s,ie),b(s,P),b(s,ne),b(s,M),b(s,oe),b(s,ae),b(s,j),se||(pe=[ye(xe.call(null,l)),ye(xe.call(null,s))],se=!0)},p(e,[o]){var t,N,J,D,ve,be;if(o&18){w=Y(e[1]);let u;for(u=0;u<w.length;u+=1){const G=Re(e,w,u);C[u]?C[u].p(G,o):(C[u]=Be(G),C[u].c(),C[u].m(_.parentNode,_))}for(;u<C.length;u+=1)C[u].d(1);C.length=w.length}if(o&36){F=Y(e[2]);let u;for(u=0;u<F.length;u+=1){const G=Te(e,F,u);k[u]?k[u].p(G,o):(k[u]=Ne(G),k[u].c(),k[u].m(g.parentNode,g))}for(;u<k.length;u+=1)k[u].d(1);k.length=F.length}o&1&&V!==(V=((N=(t=e[0])==null?void 0:t.room)==null?void 0:N.state)=="public")&&(S.checked=V),o&1&&W!==(W=((D=(J=e[0])==null?void 0:J.room)==null?void 0:D.state)=="private")&&(O.checked=W),o&1&&X!==(X=((be=(ve=e[0])==null?void 0:ve.room)==null?void 0:be.state)=="reserved")&&(P.checked=X)},i:Ce,o:Ce,d(e){e&&(c(i),c(r),c(f),c(_),c(R),c(E),c(l),c(z),c(g),c(d),c(B),c(L),c(K),c(H),c(Q),c(s)),ke(C,e),ke(k,e),se=!1,qe(pe)}}}function Ie(n,i,r){let{data:a}=i,{form:f}=i,_=(a==null?void 0:a.editors)||[],R=[];const E=a.room.id,l=async d=>{await fetch("/api/editors/remove",{method:"POST",body:JSON.stringify({user_id:d,room_id:E})}),r(1,_=_.filter(function(B){return B.user_id!=d}))},p=async(d,B)=>{await fetch("/api/editors/add",{method:"POST",body:JSON.stringify({user_id:d,room_id:E,username:B})}),r(1,_=[..._,{user_id:d,username:B}]),r(6,f.results=[],f)},z=d=>l(d),g=(d,B)=>p(d,B);return n.$$set=d=>{"data"in d&&r(0,a=d.data),"form"in d&&r(6,f=d.form)},n.$$.update=()=>{n.$$.dirty&67&&r(2,R=(f==null?void 0:f.results.filter(d=>!(d.username===a.username||_.some(B=>B.username===d.username))))||[])},[a,_,R,E,l,p,f,z,g]}class Fe extends Le{constructor(i){super(),He(this,i,Ie,Ae,ge,{data:0,form:6})}}export{Fe as component};
